<!doctype html>
<html lang="en">
  <head>
    <meta content="IE=edge" http-equiv="X-UA-Compatible" />
    <meta charset="utf-8" />
    <meta content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport" />
    <meta content="This post talks about the best ways to manage your configurations for continuous delivery of a microservices setup." name="description" />
    <meta content="Configuration strategy, microservices, distributed configuration, secrets, centrally manage configuration" name="keywords" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@goforcd" />
    <meta name="twitter:title" content="Continuous Delivery of Microservices - Configuration Strategy | GoCD Blog" />
    <meta name="twitter:description" content="This post talks about the best ways to manage your configurations for continuous delivery of a microservices setup." />
    <meta name="twitter:image" content="https://www.gocd.org/assets/images/blog/cd-considerations/cd-microservices-configuration-strategy-95389633.jpg" />
    <link rel="canonical" href="https://www.gocd.org/2018/07/11/cd-microservices-configuration-strategy.html" />

    <title>Continuous Delivery of Microservices - Configuration Strategy | GoCD Blog</title>
    <link href="../../../assets/images/favicon.ico" rel="shortcut icon" />
    <link href="../../../assets/stylesheets/site-bfa048f4.css" rel="stylesheet" />
    <script src="../../../assets/javascripts/all-667de1bb.js" data-manual="true"></script>
    
    <link rel="alternate" type="application/atom+xml" title="GoCD blog feed" href="../../../feed.xml" />
    <script>
      $(document).ready(function(){
      $('.chocolat-parent').Chocolat();
    });
    </script>
  </head>

  <body class="x2018 x2018_07 x2018_07_11 x2018_07_11_cd-microservices-configuration-strategy">
    <header class="top">
  <div class="container">
    <a href="../../../" class="logo" analytics-label="logo"><img src="../../../assets/images/go_logo-5b5ca9e1.svg" title="GoCD Logo" alt="GoCD Logo" /></a>
    <nav class="mainnav">
      <ul class="level0">
        <li><a href="../../../why-gocd/" class="link_whygocd" analytics-label="link_whygocd">Features</a></li>
        <li><a href="https://docs.gocd.org/current/" class="link_documentation" analytics-label="link_help&gt;link_documentation">Documentation</a></li>
        <li><a href="../../../blog/" class="link_blog" analytics-label="Blog">Blog</a></li>
        <li><a href="../../../download/" class="link_download" analytics-label="Download">Download</a></li>
      </ul>
    </nav>
    <button class="navbtn menu collapse">
    <span></span>
    </button>
  </div>

</header>
<span id="top"></span>

    <div class="container blog-post">


  



  <div class="row">
    <div class="col-md-9">

    <div class="post-banner">
        <figure>
    <img src="../../../assets/images/blog/cd-considerations/cd-microservices-configuration-strategy-95389633.jpg" alt="Continuous Delivery of Microservices"/>
  </figure>

    </div>


  <header class="blog-post-header">
    <h1>Configuration Strategy for Continuous Delivery of Microservices</h1>
    <h4>Sheroy Marker</h4>
    <p class='tags'>
<a href="../../../tags/cd-for-microservices.html" class="tag">        CD for Microservices
</a>     </p>
  </header>

      <main id="main" role="main" class="blog-post-main-container">
      
<p>This is the fifth post in the series - <a href="https://www.gocd.org/tags/cd-for-microservices.html">CD of Microservices</a>. In the <a href="https://www.gocd.org/2018/06/12/cd-microservices-environment-strategy/">previous post</a>, we talked about environment strategy -  including artifact promotion and ways to leverage modern infrastructure for dynamic environments. In this post, we will discuss configuration strategy.</p>

<h2 id="introduction">Introduction</h2>

<p>An applicationâ€™s configuration is everything that is variable per deployment. If you can re-deploy the same code but switch out certain aspects (like URLs to third party services, ports etc.) these are what I mean by variables. Ideally, configuration should be stored separately from the application code.</p>

<p>In a system based on a microservices architecture, configuration needs to be distributed across multiple services. There are a few ways to manage configurations in a distributed way:</p>

<ul>
  <li>storing these application configurations in your config management system (e.g. <a href="https://chef.io">Chef</a>)</li>
  <li>checking in application configuration files with the code,</li>
  <li>or creating environment variables at deploy time.</li>
</ul>

<p>Here are three things you should consider for your microservices configuration strategy:</p>

<h3 id="manage-deployment-configurations-centrally">1. Manage deployment configurations centrally</h3>

<p>If you have configuration living on your CD server, the configuration tends to spread across multiple sources, e.g. Chef and CD pipelines, as a result it becomes hard to understand. One way to avoid the sprawl of configuration is to use central configuration servers like <a href="https://www.consul.io/">Consul</a> for general configuration and <a href="https://www.vaultproject.io/">Vault</a> for secrets.</p>

<h3 id="standard-process-for-distributing-configuration">2. Standard process for distributing configuration</h3>

<p>For microservices systems, one tends to have different tech stacks across the systems. If one is handling configuration differently for different stacks, then the complexity becomes hard to manage. Therefore, regardless of the tech stack of a microservice, configurations should be distributed to nodes in a standard manner. A technique we use is to make configuration available in the environment per the <a href="https://12factor.net/">12 factor</a> app methodology. As a rule of thumb, always avoid distributing configuration files.</p>

<h3 id="governance-policy-around-secrets">3. Governance policy around secrets</h3>

<p>Secrets such as API keys, passwords, and certificates need to be accessed securely. You need a governance process to ensure secrets access is managed appropriately. One technique we recommend to store all secrets is a central secrets store. The central store gives you traceability on how and when policies were changed. That traceability goes a long way in setting up a governance process.</p>

<p>A tool we recommend to store secrets is the <a href="https://www.vaultproject.io/">Vault</a> by Hashicorp.</p>

<p><em>Example</em></p>

<p>This is an example of an architecture where configurations are stored centrally in a config server and updated by the CD pipeline and pushed out to service instances.</p>

<p>At the top there is an abstraction of the CD pipeline. This updates the config server and then the configuration from the config server is pushed to the service instances. At run time, service instances are aware of how to consume this configuration. When setting-up an architecture like this, you need to consider how many configuration servers should you have. We recommend that you have one configuration server per CD environment, or at least one for production and one for all other environments.</p>

<h2 id="summary">Summary</h2>

<p>This is the part 5 of our <a href="https://www.gocd.org/tags/cd-for-microservices.html">CD of Microservices blog series</a>. We have talked about configuration strategy for your CD pipeline. In the next post, we will talk about the last consideration - remediation strategies for when something goes wrong.</p>


      </main>
    </div>
    <div class="col-md-3">
      <aside class="post-sidebar">
        <section  class="recent-articles">
          <h2 class="section-title">Recent Articles</h2>
          <ol>
            <li>
              <span class="post-date">Oct 11</span>
              <span class="post-author">Guest post by Abilash Rajasekaran</span>
              <a href="../../../2020/10/11/perform-backup-for-gocd-on-kubernetes/">Perform Backup for GoCD on Kubernetes</a>
            </li>
            <li>
              <span class="post-date">Oct 11</span>
              <span class="post-author">Guest post by Abilash Rajasekaran</span>
              <a href="../../../2020/10/11/restore-backup-for-gocd-on-kubernetes/">Restore Backup for GoCD on Kubernetes</a>
            </li>
            <li>
              <span class="post-date">Apr 14</span>
              <span class="post-author">Guest post by Abilash Rajasekaran</span>
              <a href="../../../2020/04/14/gocd-on-kubernetes-using-terraform/">GoCD on Kubernetes using Terraform</a>
            </li>
            <li>
              <span class="post-date">Sep 17</span>
              <span class="post-author">Mohamed Najiullah</span>
              <a href="../../../2019/09/17/configure-gocd-agents-kubernetes-static-elastic/">Configuring GoCD Agents in Kubernetes</a>
            </li>
            <li>
              <span class="post-date">Aug  5</span>
              <span class="post-author">Mohamed Najiullah</span>
              <a href="../../../2019/08/05/configure-container-registry-gcr-artifact-store-gocd/">Configuring Google Container Registry (GCR) as an Artifact Store in GoCD</a>
            </li>
          </ol>
        </section>
        <section>
          <h2 class="section-title">By Year</h2>
          <ol>
            <li><a href="../../../2020/">2020 (3)</a></li>
            <li><a href="../../../2019/">2019 (7)</a></li>
            <li><a href="../../">2018 (17)</a></li>
            <li><a href="../../../2017/">2017 (39)</a></li>
            <li><a href="../../../2016/">2016 (8)</a></li>
            <li><a href="../../../2015/">2015 (21)</a></li>
            <li><a href="../../../2014/">2014 (25)</a></li>
          </ol>
        </section>

      </aside>
    </div>
  </div>

  <div class="row">
    <div class="col-md-9">
      <div id="disqus_thread"></div>
      <script>
        var disqus_config = function () {
          /* Careful: Changing the value of page.url and page.identifier might mean you lose comments. */
          this.page.url = "https://www.go.cd/2018/07/11/cd-microservices-configuration-strategy.html";
          this.page.identifier = this.page.url;
          this.shortname = 'gocdblog';
        };
        (function() {  // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');

        s.src = '//gocdblog.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
        })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
    </div>
  </div>
</div>

<!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-571784c91d5449dd"></script>

    <footer>
  <div class="join-community">
    <ul>
      <li>
        <a href="https://groups.google.com/forum/#!forum/go-cd" target="_blank" analytics-label="google-group">
          <i class="icon fa fa-users fa-4x join-us" aria-hidden="true"></i>
          <span>Join our discussion forum</span>
        </a>
      </li>
      <li>
        <a href="https://gitter.im/gocd/gocd" target="_blank" analytics-label="gitter">
          <i class="icon fa fa-comments fa-4x develop-with-us" aria-hidden="true"></i>
         <span>Chat with us</span>
        </a>
      </li>
      <li>
        <a href="https://github.com/gocd/gocd" target="_blank" analytics-label="github">
          <i class="icon fa fa-github fa-4x watch-us" aria-hidden="true"></i>
          <span>watch us</span>
        </a>
      </li>
    </ul>
  </div>

  <div class="page-footer">
    <div class="container">
      <div class="row">
        <div class="col-md-2">
          <ul class="unordered-list">
            <li><a href="../../../download/">DOWNLOAD GoCD</a></li>
            <li><a href="../../../getting-started/part-1/">INTRO TO GoCD</a></li>
            <li><a href="../../../test-drive-gocd.html">TEST DRIVE GoCD</a></li>

          </ul>
        </div>

        <div class="col-md-2">
          <ul class="unordered-list">
            <li><a href="../../../plugins/">PLUGINS</a></li>
            <li><a href="../../../resources/">RESOURCES</a></li>
            <li><a href="https://www.thoughtworks.com/privacy-policy">PRIVACY</a> </li>
          </ul>
        </div>

        <div class="col-md-2">
          <ul class="unordered-list">
            <li><a href="https://www.github.com/gocd" target="_blank">FORK US ON GITHUB</a></li>
            <li><a href='../../../assets/gocd-brand-styleguide.zip'>LOGOS + BRAND</a></li>
            <li><a href="../../../contribute/">CONTRIBUTE</a></li>
          </ul>
        </div>

        <div class="col-md-2">
        </div>

        <div class="col-md-4">
          <p>
            GoCD is an open-source project, sponsored by <a target="_blank" href="https://www.thoughtworks.com" analytics-label="link_footer_thoughtworks">ThoughtWorks Inc.</a>
            under the <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank" title="Apache 2.0 License">Apache License, Version 2.0</a>
          </p>
        </div>
      </div>
    </div>
  </div>
</footer>

    <div class='imagemodal'>
      <div class='imagemodalcontent'>
      </div>
      <div class='close'>&#10006;
      </div>
    </div>

  </body>
  <!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5T5PTB"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>
// <![CDATA[
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-5T5PTB');
// ]]>
</script>
<!-- End Google Tag Manager -->

<!-- Marketo async-->
<script type="text/javascript">
(function() {
  var didInit = false;
  function initMunchkin() {
    if(didInit === false) {
      didInit = true;
      Munchkin.init('199-QDE-291');
    }
  }
  var s = document.createElement('script');
  s.type = 'text/javascript';
  s.async = true;
  s.src = '//munchkin.marketo.net/munchkin.js';
  s.onreadystatechange = function() {
    if (this.readyState == 'complete' || this.readyState == 'loaded') {
      initMunchkin();
    }
  };
  s.onload = initMunchkin;
  document.getElementsByTagName('head')[0].appendChild(s);
})();
</script>
<!-- End Marketo async-->

<!-- Twitter universal website tag code -->
<script>
!function(e,t,n,s,u,a){e.twq||(s=e.twq=function(){s.exe?s.exe.apply(s,arguments):s.queue.push(arguments);
},s.version='1.1',s.queue=[],u=t.createElement(n),u.async=!0,u.src='//static.ads-twitter.com/uwt.js',
a=t.getElementsByTagName(n)[0],a.parentNode.insertBefore(u,a))}(window,document,'script');
// Insert Twitter Pixel ID and Standard Event data below
twq('init','nw15k');
twq('track','PageView');
</script>
<!-- End Twitter universal website tag code -->

</html>
