<!doctype html>
<html lang="en">
  <head>
    <meta content="IE=edge" http-equiv="X-UA-Compatible" />
    <meta charset="utf-8" />
    <meta content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport" />
    <meta content="GoCD is excited to announce the release of our Kubernetes Helm Chart that will allow our users to run GoCD natively on Kubernetes." name="description" />
    <meta content="microservices, continuous delivery, microservices architecture, continuous integration, hotfixes, test pyramid" name="keywords" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@goforcd" />
    <meta name="twitter:title" content="Five Considerations for Continuous Delivery of Microservices | GoCD Blog" />
    <meta name="twitter:description" content="GoCD is excited to announce the release of our Kubernetes Helm Chart that will allow our users to run GoCD natively on Kubernetes." />
    <meta name="twitter:image" content="https://www.gocd.org/assets/images/blog/cd-considerations/5-consideration-microservices-gocd-12ad175f.jpg" />
    <link rel="canonical" href="https://www.gocd.org/2018/04/25/five-considerations-continuous-delivery-microservices.html" />

    <title>Five Considerations for Continuous Delivery of Microservices | GoCD Blog</title>
    <link href="../../../assets/images/favicon.ico" rel="shortcut icon" />
    <link href="../../../assets/stylesheets/site-586f4aa6.css" rel="stylesheet" />
    <script src="../../../assets/javascripts/all-c302485f.js"></script>
    
    <link rel="alternate" type="application/atom+xml" title="GoCD blog feed" href="../../../feed.xml" />
    <script>
      $(document).ready(function(){
    $('.chocolat-parent').Chocolat();
});
    </script>
  </head>

  <body class="x2018 x2018_04 x2018_04_25 x2018_04_25_five-considerations-continuous-delivery-microservices">
    <header class="top">
  <div class="container">
    <a href="../../../" class="logo" analytics-label="logo"><img src="../../../assets/images/go_logo-5b5ca9e1.svg" title="GoCD Logo" alt="GoCD Logo" /></a>
    <nav class="mainnav">
      <ul class="level0">
        <li><a href="../../../why-gocd/" class="link_whygocd" analytics-label="link_whygocd">Features</a></li>
        <li><a href="https://docs.gocd.org/current/" class="link_documentation" analytics-label="link_help&gt;link_documentation">Documentation</a></li>
        <li><a href="../../../blog/" class="link_blog" analytics-label="Blog">Blog</a></li>

        <li class="dropdown"><a href="../../../enterprise/" class="link_enterprise" analytics-label="Enterprise">Enterprise</a>
          <ul class="level1 mobile-nav">
            <li><a href="../../../enterprise/" class="link_overview">Overview</a></li>
            <li><a href="../../../enterprise/addons/" class="link_addons">Add-ons</a></li>
            <li><a href="../../../enterprise/support/" class="link_support">Support</a></li>
            <li><a href="../../../enterprise/pricing/" class="link_pricing">Pricing</a></li>
            <li><a href="../../../enterprise/contact/" class="link_contact">Contact</a></li>
          </ul>
        </li>
        <li><a href="../../../download/" class="download-btn-header" analytics-label="Download">Download</a></li>
      </ul>
    </nav>
    <button class="navbtn menu collapse">
    <span></span>
    </button>
  </div>

</header>
<span id="top"></span>

    <div class="container blog-post">


  



  <div class="row">
    <div class="col-md-9">

    <div class="post-banner">
        <figure>
    <img src="../../../assets/images/blog/cd-considerations/5-consideration-microservices-gocd-12ad175f.jpg" alt="Continuous Delivery of Microservices"/>
  </figure>

    </div>


  <header class="blog-post-header">
    <h1>5 Considerations for Continuous Delivery of Microservices</h1>
    <h4>Sheroy Marker</h4>
    <p class='tags'>
<a href="../../../tags/cd-for-microservices.html" class="tag">        CD for Microservices
</a>     </p>
  </header>

      <main id="main" role="main" class="blog-post-main-container">
      
<p>A microservice architecture builds software as suites of collaborating services. These architectures are generally accepted as a better way to build apps these days.
Continuous Delivery is an essential component of any software delivery practice. Regardless of the target deployment environment, you have to design a CD workflow to get software changes into production.</p>

<p>At ThoughtWorks, while partnering with clients building business-critical software, we overcome many challenges around building CD workflows for microservices. In this blog series, I will share the considerations we keep in mind in architecture design and application development.</p>

<h2 id="microservices-and-continuous-delivery">Microservices and Continuous Delivery</h2>

<p>According to <a href="https://martinfowler.com/articles/microservices.html">Martin Fowler</a>, microservices architectures are  “a particular way of designing software applications as suites of independently deployable services.” These architectures are prevalent these days for building applications based on distributed systems concepts.</p>

<p>Jez Humble, in his pioneering book describes continuous delivery as "the ability to get changes of all types - including new features, configuration, bug fixes, and experiments - into production, safely and quickly in a sustainable way."</p>

<p>Regardless of the target deployment environment or your architecture choice, monolithic architecture in the past or microservices these days, it’s important to design a continuous delivery workflow to get your changes into production. A CD workflow is central to a DevOps process, and spans well across various functions in an organization including your development, QA and IT operations.</p>

<h2 id="four-challenges-for-cd-on-microservices">Four Challenges for CD on Microservices</h2>

<ol>
  <li>
    <p><strong>Maintaining the integrity of complex distributed systems.</strong> Since you decompose a large monolithic system into smaller, more manageable microservices, the overall complexity of the system itself increases. You now have to deal with distributed systems concerns.</p>
  </li>
  <li>
    <p><strong>Safely and rapidly releasing features constantly.</strong> Managing frequent feature releases needs special consideration when your features could involve changes in one or many microservices.</p>
  </li>
  <li>
    <p><strong>Managing deployments of disparate technology stacks.</strong> Microservice environments often include disparate technology stacks for services. Managing a deployment process across these different stacks is challenging.</p>
  </li>
  <li>
    <p><strong>Process and tooling for deploying services independently and out of band.</strong> There are a lot of tools available to model CD workflows. It’s daunting to initially map out your CD workflow and pick tooling that best represents this workflow.</p>
  </li>
</ol>

<h2 id="five-considerations-for-cd-on-microservices">Five Considerations for CD on Microservices</h2>

<p>There are five considerations I recommend keeping in mind when you design a CD workflow on microservices architectures. I will have an in-depth discussion for each of them in the following posts of this series. Here is just an overview:</p>

<p><strong>1. Have an effective test strategy</strong></p>

<p><img src="../../../assets/images/blog/cd-considerations/test-strategy-0cde2295.jpeg" alt="Effective test strategy" /></p>

<p>Testing and verification of microservice systems is significantly more nuanced and complex than testing a traditional monolithic application. An effective test strategy needs to account for both testing individual services in isolation and the verification of overall system behavior.</p>

<p>For pre-production testing of services, especially in an isolated manner, traditional testing methodologies are still applicable and relevant. The <a href="https://martinfowler.com/bliki/TestPyramid.html">test pyramid</a> can still help you in maintaining a balance between the different types of tests. However, this style of testing has limited effectiveness when testing the aggregate of services. There are categories of errors that you can’t simulate in test environments, for example, issues caused by eventual consistency in a highly distributed system, hardware and network failures causing parts of the system to fail.</p>

<p>You have to supplement traditional testing techniques with techniques like synthetic user testing, lightweight user acceptance testing and fault injection testing.</p>

<p><strong>2. Examine your CI practices</strong></p>

<p>Continuous integration is a key practice in a successful continuous delivery strategy. Apart from the obvious considerations around build servers and build definitions, <a href="https://trunkbaseddevelopment.com">trunk based development</a> and <a href="https://martinfowler.com/articles/feature-toggles.html">feature toggles</a> are two key practices that go a long way in implementing a simple and robust CI process.</p>

<p>In trunk based development, developers collaborate on code in a single branch called “trunk.” The key benefit is to avoid drift in development branches and the resulting merge hell. This is contrary to the practice of maintaining long-lived feature and release branches. In a branching model, though you may be running builds on individual branches, arguably <a href="https://www.gocd.org/2017/05/16/its-not-CI-its-CI-theatre.html">you aren’t doing continuous integration</a>.</p>

<p>To do trunk based development, you need to have controls called feature toggles. Feature toggles enable multiple commits of a combination of WIP and completed features. With these toggles, you can turn off the manifestation of incomplete features in production, until the features are dev complete and testing sufficiently in pre-production environments. Feature toggles are usually stored in a specification or configuration file close to the codebase and used by automation in the CD pipeline to turn toggles on in specific environments.</p>

<p>Once you have a mechanism for maintaining feature toggles, you can use the same mechanism to introduce other categories of toggles like release toggles (to control access to unfinished code), Ops toggles (to control the behavior of production code), permissions toggles (to turn on specific behavior for privileged users), and experimental toggles (for multivariate testing - How well a feature is received before you make it permanent).</p>

<p><strong>3. Plan your environments</strong></p>

<p><img src="../../../assets/images/blog/cd-considerations/environments-plan-e0ff13b0.jpeg" alt="Environments plan" /></p>

<p>An environment plan includes your sets of environments, the intended use of them, strategies to promote artifacts through these environments and toggle states on these environments.</p>

<p>First, think about what environments are needed and their intended use cases. Different groups in your organization will have different competing needs. When creating an environment, you should cater to all of these competing needs. Secondly, if possible, consider using cloud infrastructure to create environments dynamically. For example, use Kubernetes’ labels capability to create on the fly test environments for automated testing rather than have long lived environments. Thirdly, have an artifact promotion strategy. CD pipelines generate a lot of artifacts. You should you think about: how many artifacts to store, how many repositories you need, etc.</p>

<p><strong>4. Manage configuration strategically</strong></p>

<p>An application’s configuration includes everything that varies per deployment and should be stored separately from the code. How should you treat configuration when you have suites of microservices?</p>

<p>One technique we've seen to be useful is to manage deployment configuration centrally in repositories like <a href="https://www.consul.io/">Consul</a> or <a href="https://www.vaultproject.io/">Vault</a>. Spreading deployment configurations across tools like <a href="https://www.chef.io/chef/">Chef</a> and the CD pipeline just makes it hard to understand and reason.</p>

<p>Another technique we use is to standardize processes for distributing configuration regardless of the technology stack of your services, and just let services handle the consuming of this configuration depending on the stack.  For example, we generally use the <a href="https://12factor.net/">12-factor recommendations</a> and avoid distributing configuration files.</p>

<p>And lastly, secrets like certificates need a governance process to ensure they are managed appropriately. This is usually a manual process but you need to think about it earlier and get it in place.</p>

<p><strong>5. Prepare for things to go wrong</strong></p>

<p>In microservices systems, multiple services get updated frequently, how do you respond when a deployment of a service introduces instability or bugs?</p>

<p>Roll forward, which means finding the root cause of a failure and applying the fix as soon as possible, is most times the best remediation response. A prerequisite for being able to do this is to ensure you have the capability to release from a <a href="https://www.gocd.org/2017/06/20/hotfixes-rollback-rollforward/">hot fix branch</a> straight to production. You may not want a fix to a production outage to go through the CD pipeline, depending on the time it takes for a change to make it through the pipeline.</p>

<p><img src="../../../assets/images/blog/cd-considerations/hotfix-process-fef37152.jpeg" alt="Hotfix process" /></p>

<p>Rollbacks are always tricky in production systems. In most cases if the change is granular and can be reasoned about, it’s easy to rollback. But if the deployment includes changes that aren’t easy to reason about, e.g., DB changes, especially ones that make schema changes, you need to deploy DB changes separately from code changes in consecutive deployments to ensure backwards compatibility of DB changes with earlier versions of code.</p>

<h2 id="summary">Summary</h2>

<p>This is the part 1 of our Continuous Delivery of Microservices blog series. We have talked about four challenges and five considerations for building CD pipelines on microservices architecture. In the next blog, I will have an in-depth discussion on the first consideration: testing strategy for a system based on microservices architectures.</p>

      </main>
    </div>
    <div class="col-md-3">
      <aside class="post-sidebar">
        <section  class="recent-ariticles">
          <section class='post'>
            <div class='subscribe-to-blog blogpost'>
   <h3 class='subscribe-title'>Subscribe to The Pipeline</h3>
   <p style="font-size:12px; font-weight:300">A bi-monthly newsletter with continuous delivery news and events.</p>
    <div id="subscribe-info">
      <form id="mktoForm_5414"></form>
      <div class="form-loading-error"></div>
    </div>
    <script defer="true" src="//app-e.marketo.com/js/forms2/js/forms2.min.js"></script>
    <script defer="true" src="../../../assets/javascripts/marketo_popover-a55210a4.js" onload="new MarketoForm('//app-e.marketo.com', '199-QDE-291').init(5414)"></script>
</div>

          </section>
          <h2 class="section-title">Recent Articles</h2>
          <ol>
            <li>
              <span class="post-date">Mar 19</span>
              <span class="post-author">Ankit Srivistava</span>
              <a href="../../../2019/03/19/user-authorization-ldap/">Use OpenLDAP for User Authentication in GoCD</a>
            </li>
            <li>
              <span class="post-date">Jan 14</span>
              <span class="post-author">Aravind S.V and Suzie Prince</span>
              <a href="../../../2019/01/14/cd-metrics-deployment-lead-time/">Continuous Delivery Metrics Part 3&#58; How long does it take to get from committing code to production?</a>
            </li>
            <li>
              <span class="post-date">Nov 30</span>
              <span class="post-author">Aravind S.V and Suzie Prince</span>
              <a href="../../11/30/deployment-frequency/">Continuous Delivery Metrics Part 2&#58; How often do you deploy to production?</a>
            </li>
            <li>
              <span class="post-date">Oct 30</span>
              <span class="post-author">Aravind S.V and Suzie Prince</span>
              <a href="../../10/30/measure-continuous-delivery-process/">Continuous Delivery Metrics Part 1&#58; Why measure your CD process</a>
            </li>
            <li>
              <span class="post-date">Oct 16</span>
              <span class="post-author">Aravind S.V, Product Manager at GoCD</span>
              <a href="../../10/16/new-gocd-features/">What's new in GoCD</a>
            </li>
          </ol>
        </section>
        <section>
          <h2 class="section-title">By Year</h2>
          <ol>
            <li><a href="../../../2019/">2019 (2)</a></li>
            <li><a href="../../">2018 (17)</a></li>
            <li><a href="../../../2017/">2017 (39)</a></li>
            <li><a href="../../../2016/">2016 (8)</a></li>
            <li><a href="../../../2015/">2015 (21)</a></li>
            <li><a href="../../../2014/">2014 (26)</a></li>
          </ol>
        </section>

      </aside>
    </div>
  </div>

  <div class="row">
    <div class="col-md-9">
      <div id="disqus_thread"></div>
      <script>
        var disqus_config = function () {
          /* Careful: Changing the value of page.url and page.identifier might mean you lose comments. */
          this.page.url = "https://www.go.cd/2018/04/25/five-considerations-continuous-delivery-microservices.html";
          this.page.identifier = this.page.url;
          this.shortname = 'gocdblog';
        };
        (function() {  // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');

        s.src = '//gocdblog.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
        })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
    </div>
  </div>
</div>

<!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-571784c91d5449dd"></script>

    <footer>
  <div class="join-community">
    <ul>
      <li>
        <a href="https://groups.google.com/forum/#!forum/go-cd" target="_blank" analytics-label="google-group">
          <i class="icon fa fa-users fa-4x join-us" aria-hidden="true"></i>
          <span>Join our discussion forum</span>
        </a>
      </li>
      <li>
        <a href="https://gitter.im/gocd/gocd" target="_blank" analytics-label="gitter">
          <i class="icon fa fa-comments fa-4x develop-with-us" aria-hidden="true"></i>
         <span>Chat with us</span>
        </a>
      </li>
      <li>
        <a href="https://github.com/gocd/gocd" target="_blank" analytics-label="github">
          <i class="icon fa fa-github fa-4x watch-us" aria-hidden="true"></i>
          <span>watch us</span>
        </a>
      </li>
      <li>
        <a href="https://twitter.com/goforcd" target="_blank" analytics-label="twitter">
          <i class="icon fa fa-twitter fa-4x follow-us" aria-hidden="true"></i>
          <span>follow us</span>
        </a>
      </li>

      <li>
      <a href="../../../subscribe/"><i class= 'icon fa fa-envelope fa-4x subscribe' aria-hidden='true'></i> <span>subscribe</span></a>
      </li>
    </ul>
  </div>

  <div class="page-footer">
    <div class="container">
      <div class="row">
        <div class="col-md-2">
          <ul class="unordered-list">
            <li><a href="../../../download/">DOWNLOAD GoCD</a></li>
            <li><a href="../../../getting-started/part-1/">INTRO TO GoCD</a></li>
            <li><a href="../../../test-drive-gocd.html">TEST DRIVE GoCD</a></li>
            
          </ul>
        </div>

        <div class="col-md-2">
          <ul class="unordered-list">
            <li><a href="../../../plugins/">PLUGINS</a></li>
            <li><a href="../../../resources/">RESOURCES</a></li>
            <li> <a href="../../../events/">WEBINARS + EVENTS</a></li>
          </ul>
        </div>

        <div class="col-md-2">
          <ul class="unordered-list">
            <li><a href="https://www.github.com/gocd" target="_blank">FORK US ON GITHUB</a></li>
            <li><a href="https://brandfolder.com/twproducts">LOGOS + BRAND</a> </li>
            <li><a href="../../../contribute/">CONTRIBUTE</a></li>
          </ul>
        </div>

        <div class="col-md-2">
          <ul class="unordered-list">
            <li><a href="../../../enterprise/support/">ENTERPRISE SUPPORT</a> </li>
            <li><a href="https://support.thoughtworks.com/hc/en-us/requests/new" target="_blank">SUBMIT A TICKET</a></li>
            <li><a href="https://www.thoughtworks.com/privacy-policy">PRIVACY</a> </li>
          </ul>
        </div>

        <div class="col-md-4">
          <p>
            GoCD is an open-source project, sponsored by <a target="_blank" href="https://www.thoughtworks.com" analytics-label="link_footer_thoughtworks">ThoughtWorks Inc.</a>
            under the <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank" title="Apache 2.0 License">Apache License, Version 2.0</a>
          </p>
        </div>
      </div>
    </div>
  </div>
</footer>

    <div class='imagemodal'>
      <div class='imagemodalcontent'>
      </div>
      <div class='close'>&#10006;
      </div>
    </div>

  </body>
  <!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5T5PTB"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>
// <![CDATA[
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-5T5PTB');
// ]]>
</script>
<!-- End Google Tag Manager -->

<!-- Marketo async-->
<script type="text/javascript">
(function() {
  var didInit = false;
  function initMunchkin() {
    if(didInit === false) {
      didInit = true;
      Munchkin.init('199-QDE-291');
    }
  }
  var s = document.createElement('script');
  s.type = 'text/javascript';
  s.async = true;
  s.src = '//munchkin.marketo.net/munchkin.js';
  s.onreadystatechange = function() {
    if (this.readyState == 'complete' || this.readyState == 'loaded') {
      initMunchkin();
    }
  };
  s.onload = initMunchkin;
  document.getElementsByTagName('head')[0].appendChild(s);
})();
</script>
<!-- End Marketo async-->

<!-- Twitter universal website tag code -->
<script>
!function(e,t,n,s,u,a){e.twq||(s=e.twq=function(){s.exe?s.exe.apply(s,arguments):s.queue.push(arguments);
},s.version='1.1',s.queue=[],u=t.createElement(n),u.async=!0,u.src='//static.ads-twitter.com/uwt.js',
a=t.getElementsByTagName(n)[0],a.parentNode.insertBefore(u,a))}(window,document,'script');
// Insert Twitter Pixel ID and Standard Event data below
twq('init','nw15k');
twq('track','PageView');
</script>
<!-- End Twitter universal website tag code -->

</html>
