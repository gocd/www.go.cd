<!doctype html>
<html>
  <head>
    <meta content="IE=edge" http-equiv="X-UA-Compatible" />
    <meta charset="utf-8" />
    <meta content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport" />
    <meta content="New to GoCD - open source continuous delivery software? Learn about some of GoCD's concepts and features, and get the chance to try them out on a real server." name="description" />
    <meta content="GoCD, continuous delivery, continuous delivery software, continuous integration, continuous integration software, go, goforcd, open source, help, support, resources, getting started, release automation, Go" name="keywords" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@goforcd" />
    <meta name="twitter:title" content="Help - Getting Started with GoCD Part Three | GoCD" />
    <meta name="twitter:description" content="New to GoCD - open source continuous delivery software? Learn about some of GoCD's concepts and features, and get the chance to try them out on a real server." />
    <meta name="twitter:image" content="https://www.gocd.io/assets/images/gocd_continuous_delivery_thoughtworks_twitter-519f0dee.jpg" />

    <title>Help - Getting Started with GoCD Part Three | GoCD</title>
    <link href="../assets/images/favicon.ico" rel="shortcut icon" />
    <link href="../assets/stylesheets/site-1c2f1993.css" rel="stylesheet" />
    <script src="../assets/javascripts/all-240a21c3.js"></script>
    
    <link rel="alternate" type="application/atom+xml" title="GoCD blog feed" href="../feed.xml" />
  </head>

  <body class="getting-started getting-started_part-3">
    <header class="top">
  <div class="container">
    <a href="../" class="logo" analytics-label="logo"><img src="../assets/images/go_logo-5b5ca9e1.svg" title="GoCD Logo" alt="GoCD Logo" /></a>
    <nav class="mainnav">
      <ul class="level0">
        <li class="dropdown">
          <a href="../why-gocd/" class="link_whygocd" analytics-label="link_whygocd">Why GoCD?</a>
        </li>
        <li class="dropdown">
          <a href="../contribute/" class="toplink_contribute" analytics-label="link_community">Community</a>
          <ul  class="level1">
            <li><a href="../contribute/" class="link_contribute" analytics-label="link_community&gt;link_contribute">Contribute</a></li>
            <li><a href="../events/" class="link_events" analytics-label="link_community&gt;link_events">Events</a></li>
            <li><a href="../plugins/" class="link_plugins" analytics-label="link_community&gt;link_plugins">Plugins</a></li>
          </ul>
        </li>
        <li><a href="../blog/" class="link_blog" analytics-label="Blog">Blog</a></li>
        <li class="dropdown">
          <a href="../help/" class="toplink_help" analytics-label="link_help">Help</a>
          <ul  class="level1">
            <li><a href="../help/" class="getting-started" analytics-label="link_help&gt;link_getting_started">Getting started</a></li>
            <li><a href="https://docs.gocd.io/current/" target="_blank" analytics-label="link_help&gt;link_documentation">Documentation</a></li>
            <li><a href="../resources.html" class="link_resources" analytics-label="link_help&gt;link_resources">Resources</a></li>
          </ul>
        </li>
        <li><a href="../download/" class="link_download" analytics-label="link_help&gt;link_download">Download</a></li>
        <li><a href="https://www.thoughtworks.com/go" class="link_support" target="_blank" analytics-label="link_support">Get Support</a></li>
      </ul>
    </nav>
    <button class="navbtn menu collapse">
    <span></span>
    </button>
  </div>
</header>
<span id="top"></span>
<a href="http://github.com/gocd" class="github-fork-ribbon" target="_blank" analytics-label="link_header_fork&gt;link_download" title="Fork me on GitHub">Fork me on GitHub</a>

    <div class="inner-banner">
  <div class="container">
    <h1 class="caption"><span>Getting started with <span class="go">Go</span>CD</span></h1>
  </div>
</div>

<div class="container">
  <div class="row">
    
<div class="col-md-3 sidebar">
  <button class="get-start-btn"><i class="fa fa-bars"></i></button>
  <nav class="getting-started-nav">
    <h5>Getting started <span class="close-nav">X</span></h5>

    <ul class="verticalnav">
      <li class="dropdown dropdown-menu">
        <a href="#" class="active">Part 1</a>
        <ul>
          <li><a href="#" data-section="#installation" data-dest="part-1/" data-is-local="false">Installation</a></li>
          <li><a href="#" class="active" data-section="#concept1" data-dest="part-1/" data-is-local="false"><strong>Concept 1:</strong>Server and agents</a></li>
          <li><a href="#" data-section="#concept2" data-dest="part-1/" data-is-local="false"><strong>Concept 2:</strong>Pipelines and materials</a></li>
          <li><a href="#" data-section="#concept3" data-dest="part-1/" data-is-local="false"><strong>Concept 3:</strong>Agent prepares to do some work</a></li>
          <li><a href="#" data-section="#concept4" data-dest="part-1/" data-is-local="false"><strong>Concept 4:</strong>Stages, jobs and tasks </a></li>
        </ul>
      </li>
      <li class="dropdown dropdown-menu">
        <a href="#">Part 2</a>
        <ul>
          <li><a href="#" data-section="#pipeline_as_material" data-dest="part-2/" data-is-local="false">Using a pipeline as a material</a></li>
          <li><a href="#" data-section="#concept_pipeline_dependency_material" data-dest="part-2/" data-is-local="false"><strong>Concept 5:</strong>  Pipeline Dependency Material </a></li>
          <li><a href="#" data-section="#using_artifacts" data-dest="part-2/" data-is-local="false">Publishing, fetching and using artifacts</a></li>
          <li><a href="#" data-section="#concept_artifact" data-dest="part-2/" data-is-local="false"><strong>Concept 6:</strong>Artifact </a></li>
          <li><a href="#" data-section="#fetching_using_artifacts" data-dest="part-2/" data-is-local="false">Fetching and using artifacts</a></li>
          <li><a href="#" data-section="#concept_ancestor_artifacts" data-dest="part-2/" data-is-local="false"><strong>Concept 7:</strong>Ancestor artifacts and building artifacts only once </a></li>
          <li><a href="#" data-section="#custom_tabs" data-dest="part-2/" data-is-local="false">Custom tabs</a></li>
          <li><a href="#" data-section="#concept_custom_tab" data-dest="part-2/" data-is-local="false"><strong>Concept 8:</strong> Custom tab</a></li>
        </ul>
      </li>
      <li class="dropdown open">
        <a href="#">Part 3</a>
        <ul>
          <li><a href="#" data-section="#value_stream_map" data-dest="part-3/" data-is-local="true">Value Stream Map (VSM)</a></li>
          <li><a href="#" data-section="#concept_vsm" data-dest="part-3/" data-is-local="true"><strong>Concept 9:</strong>  Value Stream Map </a></li>
          <li><a href="#" data-section="#fan_out_fan_in" data-dest="part-3/" data-is-local="true">Fan-Out and Fan-In</a></li>
          <li><a href="#" data-section="#concept_fan_out_fan_in" data-dest="part-3/" data-is-local="true"><strong>Concept 10:</strong>Fan-Out and Fan-In</a></li>
        </ul>
      </li>
    </ul>
  </nav>
</div>

    <div class="col-md-9">
      <div class="getting-started-content">
        <p>
          In <a href="part-1/">Part 1</a> of this guide, the concepts of GoCD Server, GoCD Agents,
          pipelines, materials, stages, jobs and tasks were introduced. You were also able to get a simple pipeline
          with a single stage, job and task each working.
        </p>

        <p>
          In <a href="part-2/">Part 2</a>, you learnt about using pipelines as materials
          (dependency materials), artifacts and custom tabs.
        </p>

        <p>Let us continue, in this part, by learning about the Value Stream Map (VSM) and about fan-in and fan-out.</p>

        <h2 class="big-title" id="value_stream_map">Value Stream Map (VSM)</h2>

        <section class="concept" id="concept_vsm">
          <h3>Concept 9: Value Stream Map (VSM)</h3>

          <p>
            The Value Stream Map is the full end-to-end (from commits to production) view across pipelines, and maps to
            the concept of a "Continuous Delivery Pipeline" or "Deployment Pipeline", in the book, "Continuous Delivery"
            by Jez Humble and David Farley. In their book, a couple of different views of a Deployment Pipeline are
            presented:
          </p>

          <figure>
            <img src="../assets/images/image01-453d1ed1.png" title="Deployment Pipeline - Moving closer to production increases confidence of build's production" alt="Deployment Pipeline view shows that as you go closer to production, the confidence of the build's production readiness increases" />
            <figcaption>
              The idea is that, as you go closer to production, the confidence of the build's production readiness
              increases. (Image &copy; Humble, Farley)
            </figcaption>
          </figure>

          <figure>
            <img src="../assets/images/image02-7cb7c1f3.png" title="Deployment Pipeline - Interactions between source code repositories, artifact repositories and different stages" alt="Image depicts the interactions between source code repositories, artifact repositories and different stages of the Deployment Pipeline." />
            <figcaption>
              This depicts the interactions between source code repositories, artifact repositories and different stages
              of the Deployment Pipeline. (Image &copy; Humble, Farley)
            </figcaption>
          </figure>

          <p>
            A corresponding representation of a Value Stream Map in GoCD looks like this:
          </p>

          <figure>
            <img src="../assets/images/image03-da3d56f1.png" title="Representation of Value Stream Map in GoCD" alt="Go C D Value Stream Map representing the stages of deployment pipeline" />
          </figure>

          <p>
            There are some unfortunate differences in naming between GoCD and the book. What is termed as a "Stage of a Deployment
            Pipeline" in the book is called a "Pipeline" in GoCD. The "Deployment Pipeline" (end-to-end) is called the "Value
            Stream Map". In the rest of this guide, the term "Pipeline" will refer to a GoCD Pipeline and the term "Stage" will
            refer to a "Stage of a GoCD pipeline".
          </p>

          <p>
            Interestingly, Jez Humble was the first product manager of GoCD, and was around while these naming decisions were
            made. Rumour has it that he regrets the choice of the overloaded term, "Pipeline". :)
          </p>

          <p>
            The previously defined concepts of a Pipeline, Artifact and Pipeline Dependency (chaining of pipelines) come
            together to enable a true end-to-end Deployment Pipeline, which is known as a Value Stream Map (VSM) in GoCD. The
            ability to do this, and so this concept is important because:
          </p>

          <ol start="1">
            <li>
              <strong>Abstraction</strong>: It is a level of abstraction in modeling, and allows you to hide (by default) what
              is going on underneath and not have to know the details unless you need to. It helps talk about and reason about
              your end-to-end workflow at a different level.
            </li>
            <li>
              <strong>Build once</strong>: This allows artifacts to be propagated through the pipelines. As mentioned in the
              Artifact concept definition, this enables an important CD concept, "Only Build Your Binaries Once".
            </li>
            <li>
              <strong>Parallelization</strong>: This provides another approach to parallelize your workflow. In the example
              above, the User Acceptance Pipeline and the Capacity Testing Pipeline can run simultaneously, providing quicker
              feedback. This will be discussed later in this guide, in the Fan-In/Fan-Out section.
            </li>
            <li>
              <strong>Traceability</strong>: This provides true auditability and traceability, all the way from a commit to
              production. You know exactly what went into production.
            </li>
          </ol>
        </section>

        <p>
          To use a Value Stream Map in GoCD, you don't really need to do anything. If you've pipelines which use
          pipeline dependencies, then you can always get a VSM at the click of a button. Here is a dashboard view of
          pipelines which map to the example shown in the concept. Clicking on the label (marked in red boxes) of any of
          the pipelines shows the VSM from the perspective of that pipeline:
        </p>
        <figure>
          <img src="../assets/images/getting-started/gateways-to-VSM-e9ae0c02.png" title="The labels of pipelines: gateways to VSM" alt="The labels of pipelines - gateways to VSM" />
          <figcaption>The labels of pipelines: gateways to VSM</figcaption>
        </figure>

        <p>Clicking on the label of the "Production" pipeline, takes you to its Value Stream Map, in which all of its upstream
          pipelines and their source control materials are shown.</p>

        <figure>
          <img src="../assets/images/getting-started/production-pipeline-5136d4e0.png" title="VSM from the view of the Production pipeline" alt="VSM from the view of the Production pipeline" />
          <figcaption>VSM from the view of the "Production" pipeline</figcaption>
        </figure>

        <p>
          Clicking on the label of the "Build" pipeline, either from the dashboard or the VSM view above, takes you to a
          similar view with the perspective of the "Build" pipeline instance you clicked on. It is shown below. You can
          see that the source material of "CapacityTesting" pipeline is not shown, because it is not directly downstream
          of the "Build" pipeline.
        </p>

        <figure class="screenshot">
          <img src="../assets/images/getting-started/build-pipeline-ae429bf1.png" title="VSM from the view of the Build pipeline" alt="VSM from the view of the Build pipeline" />
          <figcaption>VSM from the view of the "Build" pipeline</figcaption>
        </figure>

        <p>
          Now, that we know about the VSM, let's delve a little deeper into powerful concepts called fan-in and fan-out,
          which the VSM visualizes.
        </p>

        <h2 class="big-title" id="fan_out_fan_in">Fan-Out and Fan-In</h2>

        <p>Let's start with the basic concepts and then use an example to understand this further.</p>

        <section class="concept" id="concept_fan_out_fan_in">
          <h3>Concept 10: Fan-Out and Fan-In</h3>

          <h4>Fan-Out</h4>

          <p>
            A pipeline "X" can be said to fan-out to downstream pipelines, when there are multiple downstream pipelines
            for which pipeline "X" is a dependency. It looks like this:
          </p>

          <figure>
            <img src="../assets/images/image07-77a88407.png" title="Pipeline fanning out to downstream pipelines" alt="Pipeline fanning out to downstream pipelines" />
          </figure>
          <p>
            Similarly, a source material can be said to fan-out to downstream pipelines:
          </p>

          <figure>
            <img src="../assets/images/image08-da3d56f1.png" title="Source Material fanning out to downstream pipelines" alt="Source Material fanning out to downstream pipelines" />
          </figure>
          <p>
            This brings in the advantages of parallelization and quicker feedback, which is a key goal of Continuous Delivery. As
            long as there are enough agents available, all three downstream dependencies will trigger together and can run
            together.
          </p>

          <h4>Fan-In</h4>

          <p>
            Opposite of fan-out. When multiple dependencies are used by a single pipeline, then the dependencies are
            said to fan-in to the pipeline. It looks like this:
          </p>

          <figure>
            <img src="../assets/images/image09-da3d56f1.png" title="Fanning In - Multiple dependencies used by a single pipeline" alt="image shows multiple dependencies used by a single pipeline as fanning in to the pipeline" />
          </figure>

          <p>
            In this example, there is a fan-in at the Production pipeline, from its two upstream pipelines and the git
            material. Similarly, there is a fan-in at the CapacityTesting pipeline. The important aspect of fan-in is
            not that there are multiple dependencies upstream, but the way that the pipeline is triggered, by ensuring
            that all of its dependencies are consistent in version, when the pipeline runs. This ensures correctness of
            the build, and quicker feedback through elimination of spurious builds.
          </p>
        </section>

        <p>
          Let's bring back an earlier VSM view, from the Production pipeline perspective, with the links leading into
          the Production pipeline emphasized a bit, by pinning it:
        </p>

        <figure>
          <img src="../assets/images/image10-554cdcff.png" title="VSM with links pinned - showing fan-in" alt="VSM with links pinned - showing fan-in" />
          <figcaption>VSM with links pinned - showing fan-in</figcaption>
        </figure>

        <p>
          In this setup, the Build pipeline is said to fan-out to the UserAcceptance and CapacityTesting pipelines, and
          the git material, UserAcceptance pipeline, and CapacityTesting pipeline are said to fan-in to the Production
          pipeline. From a terminology perspective, that might make sense. But what does it really mean? Why is it
          important?
        </p>

        <p>
          To understand that, let's consider what should happen when a commit (say C1) is made to the git material
          shown. Even though the Production pipeline has a direct dependency on the git material, it should not be
          triggered automatically. The correct order of triggering of pipelines is:
        </p>

        <ol>
          <li>Build pipeline - with commit C1 (let's say the pipeline label of this is "Build_1").</li>
          <li>Once it succeeds, both UserAcceptance and CapacityTesting pipelines with "Build_1" as their dependency (say "UA_1" and "CT_1").</li>
          <li>Once they succeed, Production pipeline with git commit C1, pipeline dependency UA_1, and pipeline dependency CT_1.</li>
        </ol>

        <p>
          This ordering and consistency of versioning is what GoCD with fan-out and fan-in will ensure. There are two
          main reasons for this to be considered very important:
        </p>

        <ol>
          <li>
            <p>
              <strong>Correctness</strong>: Without fan-in, if the CapacityTesting pipeline was slow and UserAcceptance
              pipeline was fast, then the Production pipeline could have been triggered with an old version of
              CapacityTesting pipeline and a new version of UserAcceptance pipeline. Imagine deploying to Production
              without really knowing that all upstream dependent pipelines have not finished successfully!
            </p>

            <p>
              A very important part of fan-out and fan-in is that a downstream pipeline will <em>always</em> figure out
              the correct upstream dependency versions, including repository materials, unless it is manually forced by
              a user not to.
            </p>

            <p>
              Similarly, any artifacts fetched from any upstream pipeline, however many levels up, is guaranteed to be
              consistent and correct. This means that the right revision of those artifacts will be fetched,
              irrespective of any other runs of that pipeline that may have run after.
            </p>
          </li>

          <li>
            <strong>Quicker feedback</strong>: By eliminating spurious builds which should never have been built (using
            wrong dependencies), fan-in provides quicker feedback. Similarly, fan-out allows multiple independent
            downstream pipelines to run simultaneously, providing quicker feedback.
          </li>
        </ol>

        <p>
          This has been a bit of a whirlwind tour of some of GoCD's concepts and ideas. To learn more about all the
          other features and how to use them, head on over to the <a href="https://docs.gocd.io/current/">GoCD
          documentation</a> page.
        </p>
      </div>
    </div>
  </div>
</div>

    <footer>
  <div class="join-community">
    <div class="container">
      <h3>Join our community</h3>
      <ul>
        <li>
          <a href="https://groups.google.com/forum/#!forum/go-cd" target="_blank" analytics-label="google-group">
            <i class="icon fa fa-users fa-4x join-us" aria-hidden="true"></i>
            Join our discussion forum
          </a>
        </li>
        <li>
          <a href="https://gitter.im/gocd/gocd" target="_blank" analytics-label="gitter">
            <i class="icon fa fa-comments fa-4x develop-with-us" aria-hidden="true"></i>
           Chat with us
          </a>
        </li>
        <li>
          <a href="https://github.com/gocd/gocd" target="_blank" analytics-label="github">
            <i class="icon fa fa-github fa-4x watch-us" aria-hidden="true"></i>
            watch us
          </a>
        </li>
        <li>
          <a href="https://twitter.com/goforcd" target="_blank" analytics-label="twitter">
            <i class="icon fa fa-twitter fa-4x follow-us" aria-hidden="true"></i>
            follow us
          </a>
        </li>
        <li>
          <a href="../subscribe/"><i class='icon fa fa-envelope fa-4x subscribe' aria-hidden='true'></i>subscribe</a>
        </li>
      </ul>
    </div>
  </div>
  <div class="page-footer">
    <div class="container">
      <div class="foo-content">
        <h5 class="help-us-improve">Make this place better</h5>
        <a href="http://github.com/gocd" class="social-buttons" analytics-label="link_footer_fork"><i class="fa fa-code-fork" aria-hidden="true" target="_blank"></i> fork</a>
        <a href="https://github.com/gocd/www.go.cd/issues"  class="social-buttons" analytics-label="link_footer_github_issues"> <i class="fa fa-github" aria-hidden="true"></i> suggest</a>
        <p>
          GoCD is an open-source project, sponsored by <a target="_blank" href="http://www.thoughtworks.com" analytics-label="link_footer_thoughtworks">ThoughtWorks Inc.</a>
          under the <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank" title="Apache 2.0 License">Apache License, Version 2.0</a>
        </p>
      </div>
    </div>
  </div>
</footer>
<a href="#top" class="back-top"><i class="fa fa-arrow-circle-up"></i></a>

    <div class='imagemodal'>
      <div class='imagemodalcontent'>
      </div>
      <div class='close'>&#10006;
      </div>
    </div>

  </body>

  <!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5T5PTB"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>
// <![CDATA[
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-5T5PTB');
// ]]>
</script>
<!-- End Google Tag Manager -->

<!-- Marketo -->
<script type="text/javascript">
document.write(unescape("%3Cscript src='//munchkin.marketo.net/munchkin.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script>Munchkin.init('199-QDE-291');</script>
<!-- End Marketo -->

<!-- Twitter universal website tag code -->
<script>
!function(e,t,n,s,u,a){e.twq||(s=e.twq=function(){s.exe?s.exe.apply(s,arguments):s.queue.push(arguments);
},s.version='1.1',s.queue=[],u=t.createElement(n),u.async=!0,u.src='//static.ads-twitter.com/uwt.js',
a=t.getElementsByTagName(n)[0],a.parentNode.insertBefore(u,a))}(window,document,'script');
// Insert Twitter Pixel ID and Standard Event data below
twq('init','nw15k');
twq('track','PageView');
</script>
<!-- End Twitter universal website tag code -->

</html>
